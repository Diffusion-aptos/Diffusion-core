{
  "version": 3,
  "sources": ["../../kinet/lib/index.js"],
  "sourcesContent": ["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Kinet = function () {\n    function Kinet(options) {\n        var _this = this;\n\n        _classCallCheck(this, Kinet);\n\n        this._handlers = {\n            set: [],\n            start: [],\n            tick: [],\n            end: []\n        };\n\n        var dafaults = {\n            friction: 1 - 0.3,\n            acceleration: 0.04,\n            initialValue: 0,\n            names: [\"x\"],\n            test: function test(instance) {\n                return Math.abs(instance.current - instance.target) > 0.1;\n            }\n        };\n\n        this._options = _extends({}, dafaults, options);\n\n        // to set correct value (1 - x)\n        if (options && options.friction) {\n            this._options.friction = 1 - options.friction;\n        }\n\n        this._instances = {};\n        this._options.names.forEach(function (name) {\n            _this._instances[name] = new KinetItem(_this._options.initialValue, _this._options.acceleration, _this._options.friction);\n        });\n\n        this._raf = null;\n    }\n\n    _createClass(Kinet, [{\n        key: 'set',\n        value: function set(name, num) {\n            var _this2 = this;\n\n            if (num == null) {\n                console.warn('Define a value.');\n                return;\n            }\n            if (this._instances[name] == null) {\n                console.warn('Instance \"' + name + '\" doesn\\'t exist.');\n                return;\n            }\n            this._instances[name].current = num;\n            this._instances[name].target = num;\n            if (!this._raf) {\n                this._handlers['set'].forEach(function (handler) {\n                    return handler(_this2._instances);\n                });\n                this._handlers['tick'].forEach(function (handler) {\n                    return handler(_this2._instances);\n                });\n            }\n        }\n    }, {\n        key: 'animate',\n        value: function animate(name, num) {\n            var _this3 = this;\n\n            if (num == null) {\n                console.warn('Define a value.');\n                return;\n            }\n            if (this._instances[name] == null) {\n                console.warn('Instance ' + name + ' doesn\\'t exist.');\n                return;\n            }\n            if (this._instances[name].target !== num) {\n                this._instances[name].target = num;\n                if (!this._raf) {\n                    this._handlers['start'].forEach(function (handler) {\n                        return handler(_this3._instances, _this3._instances);\n                    });\n                    this._animateValues();\n                }\n                return num;\n            }\n\n            return false;\n        }\n    }, {\n        key: '_animateValues',\n        value: function _animateValues() {\n            var _this4 = this;\n\n            var done = true;\n\n            Object.keys(this._instances).forEach(function (key) {\n                _this4._instances[key].update();\n\n                if (_this4._options.test(_this4._instances[key])) {\n                    done = false;\n                }\n            });\n\n            if (!done) {\n                this._raf = requestAnimationFrame(this._animateValues.bind(this));\n                this._handlers['tick'].forEach(function (handler) {\n                    return handler(_this4._instances);\n                });\n            } else {\n                // set to final values\n                Object.keys(this._instances).forEach(function (key) {\n                    _this4._instances[key].current = _this4._instances[key].target;\n                    _this4._instances[key].velocity = 0;\n                });\n\n                this._handlers['tick'].forEach(function (handler) {\n                    return handler(_this4._instances);\n                });\n                this._handlers['end'].forEach(function (handler) {\n                    return handler(_this4._instances);\n                });\n                this._raf = null;\n            }\n        }\n    }, {\n        key: 'on',\n        value: function on(event, handler) {\n            if (this._handlers[event]) {\n                this._handlers[event].push(handler);\n            } else {\n                console.warn('Unsupported event ' + event + '.');\n            }\n        }\n    }, {\n        key: 'off',\n        value: function off(event, handler) {\n            var _this5 = this;\n\n            if (event != null) {\n                if (handler != null) {\n                    if (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n                        return savedHandler === handler;\n                    }).length) {\n                        var toRemove = this._handlers[event].filter(function (savedHandler) {\n                            return savedHandler === handler;\n                        })[0];\n                        var index = this._handlers[event].indexOf(toRemove);\n                        if (index > -1) {\n                            this._handlers[event].splice(index, 1);\n                        }\n                    } else {\n                        console.warn('Handler for event ' + event + ' no found.');\n                    }\n                } else {\n                    this._handlers[event] = [];\n                }\n            } else {\n                Object.keys(this._handlers).forEach(function (keys) {\n                    _this5._handlers[keys] = [];\n                });\n            }\n        }\n    }]);\n\n    return Kinet;\n}();\n\nexports.default = Kinet;\n\nvar KinetItem = function () {\n    function KinetItem(intitalValue, acceleration, friction) {\n        _classCallCheck(this, KinetItem);\n\n        this.current = intitalValue;\n        this.target = intitalValue;\n        this._acceleration = acceleration;\n        this._friction = friction;\n        this.velocity = 0;\n    }\n\n    _createClass(KinetItem, [{\n        key: 'update',\n        value: function update() {\n            var distance = this.target - this.current;\n            var attraction = distance * this._acceleration;\n\n            this.applyForce(attraction);\n\n            this.velocity *= this._friction;\n            this.current += this.velocity;\n\n            return distance;\n        }\n    }, {\n        key: 'applyForce',\n        value: function applyForce(force) {\n            this.velocity += force;\n        }\n    }]);\n\n    return KinetItem;\n}();"],
  "mappings": "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",
  "names": ["Kinet", "KinetItem"]
}
